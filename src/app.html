<template>
  <require from="./style.css"></require>
  <require from="./resources/attributes/enter-press"></require>
  <require from="./resources/value-converters/moment-format"></require>
  <require from="./resources/value-converters/numeral-format"></require>
  <h1 class="mb-4">Timetrackerrr</h1>

  <h6>Duurtijd</h6>
  <div class="d-flex align-items-center mb-4">
    <div class="d-flex align-items-center">
      <div>
        <input id="startHour" min="0" max="23" value.bind="startHour" type="number" class="form-control">
      </div>
      <span class="hour-divider">u</span>
      <div >
        <input min="0" max="59" value.bind="startMinute" type="number" class="form-control">
      </div>
    </div>
    <span class="time-divider">
        <font-awesome-icon icon.bind="['fas','arrow-right']"></font-awesome-icon> 
    </span>
    
    <div class="d-flex align-items-center">
      <div>
        <input min="0" max="23" value.bind="endHour" type="number" class="form-control">
      </div>
      <span class="hour-divider">u</span>
      <div >
        <input min="0" max="59" value.bind="endMinute" type="number" class="form-control">
      </div>
    </div>
   
  </div>
  <h6>Project</h6>
  <div class="row mb-4">
    <div class="col-6">
      <input value.bind="projectName" keydown.trigger="keyDownInProjectName($event)"  type="text"
      class="form-control auto-suggestion-first">
    </div>
    <div class="col-6 d-flex align-items-center">
      <span class="d-flex align-items-center flex-nowrap">
        <span class="green">${suggestedProjectCorrect}</span>
        <span>${suggestedProjectRemaining}</span>
      </span>
     
    </div>
    
  </div>
  <button class="btn btn-success mb-4" click.delegate="submit()">Voeg toe</button>

  <h6 class="au-animate fly-in fly-out" if.bind="activitiesToday.length > 0">Vandaag</h6>

  <ul class="list-group">
    <li repeat.for="item of activitiesToday" class="au-animate fly-in fly-out list-group-item d-flex justify-content-between project-overview">
      <span>${item.project.name}</span>
      <span class="timetamp timestamp-total">
        <font-awesome-icon class="mr-1" icon.bind="['fas','stopwatch']"></font-awesome-icon> 
        ${item.totalHours | numeralFormat:'00'}u${item.totalMinutes | numeralFormat:'00'}
      </span>
      <div>

        <div repeat.for="activity of item.activities" class="d-flex justify-content-end align-items-center flex-nowrap project-overview-details">
          
          <span class="text-danger mr-2">
            <font-awesome-icon class="delete-icon" click.delegate="deleteActivity(activitiesToday, item, $index)" icon.bind="['fas','times-circle']"></font-awesome-icon> 
          </span>
          <span class="timestamp timestamp-left">${activity.startTime | momentFormat:'HHumm'}</span>
          <span class="mx-2">
            <font-awesome-icon icon.bind="['fas','arrow-right']"></font-awesome-icon> 
          </span>
          <span class="timestamp timestamp-right">${activity.endTime | momentFormat:'HHumm'}</span>         
      </span>
    </li>
  </ul>
</template>